#!/usr/bin/env lua

local t4 = require "t4"
local bf = require "bf"

local args = {...}

local debug = false

local files = {}
for i,v in ipairs(args) do
	if v == "-debug" then
			debug = true
	else
		table.insert(files, v)
	end
end


local src = t4.compile(files)

if src then

	if debug then
		print(src)
	end
	bf.run(src)
else
	print("Usage: ./t4 [-debug] source1 source2 source3 ...")
end