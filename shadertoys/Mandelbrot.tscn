[gd_scene load_steps=4 format=2]

[ext_resource path="res://Mandelbrot.gd" type="Script" id=1]

[sub_resource type="Shader" id=1]
code = "shader_type canvas_item;
render_mode unshaded;

uniform vec2 center;
uniform float zoom;
uniform bool applySqrt;

void fragment()
{
	int maxIter = 1000;
	
	highp vec2 c = (UV.xy - vec2(0.5,0.5)) * 2.0; // Centered on 0, -1 to 1
	
	
	c = c / pow(10, zoom);
	c = c + center;
	
	
	vec2 x = vec2(0.0, 0.0);
	int i = 0;
	
	while(i < maxIter && length(x) < 2.0)
	{
		x = vec2(x.x*x.x - x.y*x.y, 2.0 * x.x*x.y);
		x = x + c;
		i++;
	}
	
	float shade = (float(i) / float(maxIter));
	if(applySqrt)
	{
		shade = sqrt(shade);
	}
	
	COLOR = vec4(shade,shade,shade,1);

	
}"

[sub_resource type="ShaderMaterial" id=2]
shader = SubResource( 1 )
shader_param/center = null
shader_param/zoom = null
shader_param/applySqrt = null

[node name="Mandelbrot" type="Control"]
anchor_right = 1.0
anchor_bottom = 1.0
script = ExtResource( 1 )

[node name="Background" type="ColorRect" parent="."]
anchor_right = 1.0
anchor_bottom = 1.0
color = Color( 0, 0, 0, 1 )

[node name="Canvas" type="ColorRect" parent="."]
material = SubResource( 2 )
margin_right = 600.0
margin_bottom = 600.0
color = Color( 0.45098, 0.172549, 0.172549, 1 )

[node name="OutputLabel" type="Label" parent="."]
margin_left = 684.333
margin_top = 348.333
margin_right = 800.333
margin_bottom = 383.333
text = "Label "

[node name="Buttons" type="VBoxContainer" parent="."]
editor/display_folded = true
anchor_left = 1.0
anchor_right = 1.0
anchor_bottom = 1.0
margin_left = -351.0
margin_top = 38.0
margin_right = -269.0
margin_bottom = -429.0

[node name="Up" type="Button" parent="Buttons"]
margin_right = 82.0
margin_bottom = 20.0
text = "Up"

[node name="Down" type="Button" parent="Buttons"]
margin_top = 24.0
margin_right = 82.0
margin_bottom = 44.0
text = "Down"

[node name="Left" type="Button" parent="Buttons"]
margin_top = 48.0
margin_right = 82.0
margin_bottom = 68.0
text = "Left"

[node name="Right" type="Button" parent="Buttons"]
margin_top = 72.0
margin_right = 82.0
margin_bottom = 92.0
text = "Right"

[node name="In" type="Button" parent="Buttons"]
margin_top = 96.0
margin_right = 82.0
margin_bottom = 116.0
text = "In"

[node name="Out" type="Button" parent="Buttons"]
margin_top = 120.0
margin_right = 82.0
margin_bottom = 140.0
text = "Out"

[node name="Sqrt" type="CheckBox" parent="Buttons"]
margin_top = 144.0
margin_right = 82.0
margin_bottom = 168.0
text = "sqrt"

